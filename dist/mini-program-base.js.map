{"version":3,"file":"mini-program-base.js","sources":["../src/ComponentBase.ts","../src/index.ts","../src/Decorators/Component.ts","../src/Decorators/Page.ts","../src/helps/index.ts"],"sourcesContent":["import {\n  MiniComponent,\n  method,\n  ComponentBase as MiniComponentBase,\n} from \"mipp\";\nimport { IEventBase } from \"./Decorators/events\";\n\nexport default class ComponentBase<\n  IData = any,\n> extends MiniComponentBase<IData> {\n  viewStatus: \"load\" | \"ready\" = \"load\";\n\n  @method\n  aom<IComponent = MiniComponent<any>>(): IComponent {\n    return this as unknown as IComponent;\n  }\n\n  @method\n  isComponent() {\n    return true;\n  }\n\n  @method\n  isPage() {\n    return false;\n  }\n\n  /**\n   * 视图是否准备完成\n   * @returns boolean\n   */\n  @method\n  isReady() {\n    return this?.viewStatus === \"ready\";\n  }\n\n  @method\n  getEvents<IEvent = IEventBase>(): IEvent {\n    throw new TypeError(\"需要在子类重写: getEvents 方法\");\n  }\n}\n\nexport { MiniComponent };\n","import {\n  IComponentData,\n  MiniComponent as WeappMiniComponent,\n  method,\n  pageLifetime,\n  lifetimes,\n  lifetime,\n  observer as weappObserver,\n  IMiniEvent,\n  IMiniComponentOptions,\n  PageBase,\n} from \"mipp\";\nimport {\n  MiniComponent as AliMiniComponent,\n  PageBase as AliappPageBase,\n} from \"mipp-ali\";\nimport ComponentBase from \"./ComponentBase\";\nimport { IEventBase } from \"./Decorators/events\";\nexport * from \"./Decorators/index\";\n\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nfunction observer(key?: string) {\n  return weappObserver;\n}\n\nclass ViewBase<IData extends Record<string, any>> extends PageBase<IData> {\n  viewStatus: \"load\" | \"show\" | \"ready\" = \"load\";\n\n  isComponent() {\n    return false;\n  }\n\n  isPage() {\n    return true;\n  }\n\n  /**\n   * 视图是否准备完成\n   * @returns boolean\n   */\n  isReady() {\n    return this?.viewStatus === \"ready\";\n  }\n\n  getEvents<IEvent = IEventBase>(): IEvent {\n    throw new TypeError(\"需要在子类重写: getEvents 方法\");\n  }\n}\n\nexport {\n  ComponentBase,\n  WeappMiniComponent as MiniComponent,\n  WeappMiniComponent,\n  AliMiniComponent,\n  IComponentData,\n  observer,\n  method,\n  pageLifetime,\n  lifetimes,\n  lifetime,\n  IMiniEvent,\n  IMiniComponentOptions,\n  ViewBase as PageBase,\n  ViewBase as WeappPageBase,\n  AliappPageBase,\n};\n","import { ComponentBase } from \"mipp\";\n\nexport default function MiniProgramComponent(target: new (...opts: any[]) => any) {\n  const obj = new target();\n  ComponentBase.render(obj);\n}\n","import { PageBase } from \"mipp\";\nimport { generateRandomString } from \"../helps\";\n\nexport default function MiniProgramPage(target: new (...opts: any[]) => any) {\n  const obj = new target();\n  obj.__serialNumber = generateRandomString();\n  PageBase.render(obj);\n}\n","export function generateRandomString() {\n  return Date.now().toString(32) + Math.random().toString(32).substring(2);\n}\n"],"names":["ComponentBase","_super","_this","apply","this","arguments","viewStatus","__extends","prototype","aom","isComponent","isPage","isReady","getEvents","TypeError","__decorate","method","__metadata","_a","IComponent","Object","_b","IEvent","MiniComponentBase","ViewBase","PageBase","defineProperty","exports","enumerable","get","mipp","MiniComponent","lifetime","lifetimes","pageLifetime","mippAli","MiniProgramComponent","target","obj","render","MiniProgramPage","__serialNumber","Date","now","toString","Math","random","substring","WeappPageBase","observer","key","weappObserver","value"],"mappings":"yrCAOA,IAAAA,EAAA,SAAAC,GAAA,SAAAD,IAAA,IAiCCE,EAAA,OAAAD,GAAAA,EAAAE,MAAAC,KAAAC,YAAAD,YA9BCF,EAAUI,WAAqB,iBA8BjC,OA/BUC,EAAwBP,EAAAC,GAIhCD,EAAAQ,UAAAC,IAAA,WACE,OAAOL,MAITJ,EAAAQ,UAAAE,YAAA,WACE,OAAO,GAITV,EAAAQ,UAAAG,OAAA,WACE,OAAO,GAQTX,EAAAQ,UAAAI,QAAA,WACE,MAA4B,WAArBR,gBAAI,EAAJA,KAAME,aAIfN,EAAAQ,UAAAK,UAAA,WACE,MAAM,IAAIC,UAAU,0BAzBtBC,EAAA,CADCC,EAAMA,2DACiCC,EAAA,oBAAU,mBAAVC,sBAAAC,YAAAA,YAAUD,EAAAE,SAEjDpB,EAAAQ,UAAA,MAAA,MAGDO,EAAA,CADCC,EAAMA,0FAGNhB,EAAAQ,UAAA,cAAA,MAGDO,EAAA,CADCC,EAAMA,0FAGNhB,EAAAQ,UAAA,SAAA,MAODO,EAAA,CADCC,EAAMA,0FAGNhB,EAAAQ,UAAA,UAAA,MAGDO,EAAA,CADCC,EAAMA,2DAC2BC,EAAA,oBAAM,mBAANI,sBAAAC,QAAAA,QAAMD,EAAAD,SAEvCpB,EAAAQ,UAAA,YAAA,MACFR,EAjCD,CAEUuB,EAAiBvB,eCgB3B,IAAAwB,EAAA,SAAAvB,GAAA,SAAAuB,IAAA,IAsBCtB,EAAA,OAAAD,GAAAA,EAAAE,MAAAC,KAAAC,YAAAD,YArBCF,EAAUI,WAA8B,SAqB1C,OAtB0DC,EAAeiB,EAAAvB,GAGvEuB,EAAAhB,UAAAE,YAAA,WACE,OAAO,GAGTc,EAAAhB,UAAAG,OAAA,WACE,OAAO,GAOTa,EAAAhB,UAAAI,QAAA,WACE,MAA4B,WAArBR,gBAAI,EAAJA,KAAME,aAGfkB,EAAAhB,UAAAK,UAAA,WACE,MAAM,IAAIC,UAAU,0BAEvBU,EAtBD,CAA0DC,YAsBzDL,OAAAM,eAAAC,EAAA,gBAAA,CAAAC,YAAA,EAAAC,IAAA,WAAA,OAAAC,EAAAC,iBAAAX,OAAAM,eAAAC,EAAA,qBAAA,CAAAC,YAAA,EAAAC,IAAA,WAAA,OAAAC,EAAAC,iBAAAX,OAAAM,eAAAC,EAAA,WAAA,CAAAC,YAAA,EAAAC,IAAA,WAAA,OAAAC,EAAAE,YAAAZ,OAAAM,eAAAC,EAAA,YAAA,CAAAC,YAAA,EAAAC,IAAA,WAAA,OAAAC,EAAAG,aAAAb,OAAAM,eAAAC,EAAA,SAAA,CAAAC,YAAA,EAAAC,IAAA,WAAA,OAAAC,EAAAd,UAAAI,OAAAM,eAAAC,EAAA,eAAA,CAAAC,YAAA,EAAAC,IAAA,WAAA,OAAAC,EAAAI,gBAAAd,OAAAM,eAAAC,EAAA,mBAAA,CAAAC,YAAA,EAAAC,IAAA,WAAA,OAAAM,EAAAJ,iBAAAX,OAAAM,eAAAC,EAAA,iBAAA,CAAAC,YAAA,EAAAC,IAAA,WAAA,OAAAM,EAAAV,YAAAE,EAAA3B,cAAAA,EAAA2B,EAAAS,qBC7CuB,SAAqBC,GAC3C,IAAMC,EAAM,IAAID,EAChBrC,gBAAcuC,OAAOD,ID2CtBX,EAAAa,gBE5CuB,SAAgBH,GACtC,IAAMC,EAAM,IAAID,EAChBC,EAAIG,eCJGC,KAAKC,MAAMC,SAAS,IAAMC,KAAKC,SAASF,SAAS,IAAIG,UAAU,GDKtEtB,WAASc,OAAOD,IFyCjBX,EAAAF,SAAAD,EAAAG,EAAAqB,cAAAxB,EAAAG,EAAAsB,SA1BD,SAAkBC,GAChB,OAAOC,YAyBR/B,OAAAM,eAAAC,EAAA,aAAA,CAAAyB,OAAA"}